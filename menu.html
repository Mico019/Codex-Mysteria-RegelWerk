<!-- menu.html — einfache, dezente Top-Leiste (kopiere als menu.html) -->
<nav id="site-topbar" class="cm-topbar" role="navigation" aria-label="Hauptmenü">
  <div class="cm-topbar-inner">

    <!-- Linke Seite: Home-Button (JS setzt href je nach Rolle) -->
    <div class="cm-left">
      <a id="home-btn" class="cm-home" href="#" title="Startseite">Start</a>
    </div>

    <!-- Mitte: Seitenname / Platzhalter (optional) -->
    <div class="cm-center">
      <span id="current-page-title" class="cm-page-title" aria-hidden="true"></span>
    </div>

    <!-- Rechte Seite: Controls -->
    <div class="cm-right">

      <!-- Seiten-TOC (Dropdown). menu.js füllt #toc-list automatisch. -->
      <div class="cm-control">
        <button id="toc-toggle" class="cm-btn" aria-expanded="false" aria-controls="toc-list" title="Abschnitte anzeigen">
          Inhaltsverzeichnis ▾
        </button>
        <div id="toc-list" class="cm-toc-dropdown" role="menu" aria-hidden="true">
          <!-- menu.js füllt diesen Bereich mit Links (li > a) -->
        </div>
      </div>

      <!-- Menü-Guide: öffnet Popup mit Erklärungen (menu.js zeigt Modal) -->
      <button id="menu-guide-btn" class="cm-btn" title="Kurzanleitung (Guide)">Guide</button>

      <!-- Einstellungen: öffnet Einstellungs-Modal (menu.js) -->
      <button id="settings-btn" class="cm-btn" title="Einstellungen">Einstellungen</button>

      <!-- Accountbereich (zeigt Benutzername). menu.js aktualisiert Namen -->
      <div class="cm-control account-control">
        <button id="account-toggle" class="cm-btn" aria-expanded="false" aria-controls="account-popover" title="Account-Optionen">
          <span id="account-username">—</span> ▾
        </button>
        <div id="account-popover" class="cm-popover" role="menu" aria-hidden="true">
          <button data-action="account-info">Account-Informationen</button>
          <button data-action="logout" id="logout-btn">Abmelden</button>
        </div>
      </div>

      <!-- Admin: Ansicht wechseln (sichtbar nur für Admins; menu.js zeigt/verbirgt) -->
      <div class="cm-control admin-control" style="display:none;">
        <button id="admin-view-btn" class="cm-btn" aria-haspopup="true" aria-expanded="false" title="Admin: Ansicht wechseln">
          Admin ▾
        </button>
        <div id="admin-popover" class="cm-popover" role="menu" aria-hidden="true">
          <button data-action="view-as-admin">Ansicht: Admin</button>
          <button data-action="view-as-dm">Ansicht: DM</button>
          <button data-action="view-as-player">Ansicht: Spieler</button>
          <button data-action="view-as-guest">Ansicht: Gast</button>
        </div>
      </div>

    </div><!-- .cm-right -->

  </div><!-- .cm-topbar-inner -->
</nav>

