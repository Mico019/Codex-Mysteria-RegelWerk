<!-- menu.html
     Codex Mysteria - MenÃ¼system (vollversion)
     EnthÃ¤lt Top-Header, Desktop-Sidebar, TOC-Sidebar und Mobile Panel.
     Popovers enthalten Close-Buttons fÃ¼r sauberes SchlieÃŸen.
-->
<nav id="main-header" class="cm-header" aria-label="Hauptnavigation">
  <div class="menu-inner">

    <!-- Left: brand + hamburger for mobile -->
    <div class="menu-left">
      <button id="menu-toggle" class="menu-btn menu-hamburger" aria-label="MenÃ¼ Ã¶ffnen">
        <span class="hb-line"></span><span class="hb-line"></span><span class="hb-line"></span>
      </button>
      <a href="home.html" class="menu-brand" id="brand-link" aria-label="Startseite">
        <span class="brand-title">Codex Mysteria</span>
      </a>
    </div>

    <!-- Center: primary nav -->
    <div class="menu-center" id="menu-center">
      <ul class="menu-list" role="menubar" id="main-menu-list">
        <li role="none"><a role="menuitem" href="home.html" data-page="home">Start</a></li>
        <li role="none"><a role="menuitem" href="notizen.html" data-page="notes">Notizen</a></li>
        <li role="none"><a role="menuitem" href="kampagnen.html" data-page="campaigns">Kampagnen</a></li>
        <!-- Hinweis: spezifische Links (Regelwerk/Monster/Charaktere) wurden bewusst weggelassen -->
      </ul>
    </div>

    <!-- Right: page indicator, description, account, admin -->
    <div class="menu-right">

      <div id="page-indicator" class="page-indicator" aria-hidden="false">
        <span id="current-page-name">Start</span>
      </div>

      <button id="page-desc-btn" class="menu-btn" title="Seitenbeschreibung anzeigen">i</button>

      <div class="account-area" id="account-area">
        <button id="account-toggle" class="menu-btn account-btn" aria-haspopup="true" aria-expanded="false">
          <span id="account-username">â€”</span>
        </button>

        <div class="account-popover cm-popover" id="account-popover" role="menu" aria-hidden="true" data-minwidth="240px">
          <button class="cm-popover-close" aria-label="SchlieÃŸen">Ã—</button>
          <div class="account-block">
            <strong id="popover-username">â€”</strong>
            <div id="popover-role" class="muted">Rolle</div>
          </div>
          <hr>
          <ul class="account-actions">
            <li><button data-action="account-info">Account-Informationen</button></li>
            <li><button data-action="settings">Einstellungen</button></li>
            <li><button data-action="logout">Abmelden</button></li>
          </ul>
        </div>
      </div>

      <div class="admin-area admin-control" id="admin-area" style="display:none;">
        <button id="admin-toggle" class="menu-btn" aria-haspopup="true" aria-expanded="false">Admin â–¾</button>
        <div id="admin-popover" class="cm-popover" aria-hidden="true" data-minwidth="240px">
          <button class="cm-popover-close" aria-label="SchlieÃŸen">Ã—</button>
          <h4>Admin-Optionen</h4>
          <ul>
            <li><button data-action="view-as-admin">Ansicht: Admin</button></li>
            <li><button data-action="view-as-dm">Ansicht: DM</button></li>
            <li><button data-action="view-as-player">Ansicht: Spieler</button></li>
            <li><button data-action="view-as-guest">Ansicht: Gast</button></li>
            <li><a href="home_admin.html" data-action="goto-admin">Admin-Startseite</a></li>
          </ul>
        </div>
      </div>

    </div> <!-- .menu-right -->
  </div>

  <!-- Sidebar (Desktop) -->
  <aside id="sidebar-menu" class="cm-sidebar" aria-label="Hauptnavigation">
    <ul id="sidebar-list" role="menu">
      <li><a href="home.html" data-page="home">ğŸ  Start</a></li>
      <li><a href="notizen.html" data-page="notes">ğŸ“ Notizen</a></li>
      <li><a href="kampagnen.html" data-page="campaigns">ğŸ“œ Kampagnen</a></li>
      <li><a href="bibliothek.html" data-page="library">ğŸ“š Bibliothek</a></li>
    </ul>
  </aside>

  <!-- TOC (rechts) -->
  <aside id="toc-sidebar" class="cm-toc" aria-label="Seitennavigation">
    <h4>Inhalt</h4>
    <nav id="toc-list" aria-label="Seitenabschnitte"></nav>
  </aside>

  <!-- Mobile Off-canvas panel -->
  <div id="mobile-panel" class="cm-mobile" aria-hidden="true">
    <div class="cm-mobile-inner">
      <button id="mobile-close" class="menu-btn" aria-label="SchlieÃŸen">âœ•</button>
      <nav id="mobile-nav" aria-label="Mobile Navigation">
        <ul id="mobile-menu-list"></ul>
      </nav>
    </div>
  </div>
</nav>

<!-- MenÃ¼-CSS laden (falls du es separat hast) -->
<link rel="stylesheet" href="menu.css">
