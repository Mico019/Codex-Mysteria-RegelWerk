/* menu.css — Codex Mysteria (wiederhergestellt & popover fixes)
   - Enthält Themes via [data-theme]
   - Popovers/Modals haben hohe z-index, Close-Button-Styles
*/

/* ---------- Farbvariablen ---------- */
:root {
  --bg: #0f0f12;
  --bg-alt: #1a1a1e;
  --fg: #eaeaea;
  --muted: rgba(234,234,234,0.75);
  --accent: #7a5fff;
  --accent-2: #a892ff;
  --border: #2d2d35;
  --header-h: 60px;
  --max-w: 1180px;
  --transition: 200ms ease;
}

/* Light */
[data-theme="light"] {
  --bg: #fbfbfc; --bg-alt: #ffffff; --fg: #111; --muted: rgba(0,0,0,0.55);
  --accent: #3d3dd1; --accent-2: #5959f9; --border: #e6e6e9;
}

/* Fantasy */
[data-theme="fantasy"] {
  --bg: #1a0f26; --bg-alt: #2c1840; --fg: #f7f2ff; --muted: rgba(247,242,255,0.8);
  --accent: #b06aff; --accent-2: #d49bff; --border: #442a63;
}

/* ---------- Header (Top) ---------- */
.cm-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--header-h);
  background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.08));
  color: var(--fg);
  z-index: 2200; /* high but below modals/popovers */
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px);
}

/* inner content width */
.menu-inner {
  width: 100%;
  max-width: var(--max-w);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 8px 14px;
}

/* left / center / right */
.menu-left { display:flex; align-items:center; gap:12px; }
.menu-center { flex:1; padding-left:12px; }
.menu-right { display:flex; align-items:center; gap:10px; }

/* brand */
.menu-brand { text-decoration:none; color:var(--accent-2); font-weight:700; font-size:1.05rem; }

/* hamburger */
.menu-hamburger { display:none; border:none; background:transparent; cursor:pointer; padding:6px; }
.hb-line { display:block; width:20px; height:2px; background:var(--muted); margin:3px 0; border-radius:2px; }

/* menu list center */
.menu-list { display:flex; gap:10px; list-style:none; margin:0; padding:0; align-items:center;}
.menu-list a { color:var(--muted); text-decoration:none; padding:6px 10px; border-radius:8px; transition: all var(--transition); }
.menu-list a:hover, .menu-list a.active { color:#fff; background: linear-gradient(90deg,var(--accent),var(--accent-2)); box-shadow: 0 8px 24px rgba(0,0,0,0.28); }

/* page indicator and small btns */
.page-indicator { font-size:14px; color:var(--muted); margin-right:6px; padding:0 6px; }
.menu-btn { background:transparent; border:none; color:var(--muted); padding:6px 8px; border-radius:8px; cursor:pointer; }
.menu-btn:hover { background: rgba(255,255,255,0.02); color:var(--fg); }

/* ---------- Sidebar (Desktop) ---------- */
.cm-sidebar {
  position: fixed;
  top: var(--header-h);
  left: 0;
  width: 220px;
  height: calc(100vh - var(--header-h));
  background: var(--bg-alt);
  border-right: 1px solid var(--border);
  padding: 12px 0;
  overflow:auto;
  z-index: 900;
}
.cm-sidebar ul { list-style:none; padding:0; margin:0; }
.cm-sidebar a { display:block; padding:10px 14px; color:var(--fg); text-decoration:none; border-radius:8px; margin:4px 8px; }
.cm-sidebar a:hover, .cm-sidebar a.active { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; }

/* ---------- TOC (right) ---------- */
.cm-toc {
  position: fixed;
  top: var(--header-h);
  right: 18px;
  width: 220px;
  height: calc(100vh - var(--header-h));
  background: var(--bg-alt);
  border-left: 1px solid var(--border);
  padding: 12px;
  overflow:auto;
  z-index: 900;
}
.cm-toc h4 { margin:0 0 8px 0; color:var(--muted); font-size:13px; text-align:center; }
.cm-toc a { display:block; padding:6px 8px; color:var(--muted); text-decoration:none; border-radius:6px; margin:6px 0; }
.cm-toc a.active { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; }

/* ---------- Mobile panel ---------- */
.cm-mobile { position: fixed; inset:0; background: rgba(0,0,0,0.45); display:none; z-index:1600;}
.cm-mobile[aria-hidden="false"] { display:block; }
.cm-mobile-inner { width:320px; max-width:92%; height:100%; background:var(--bg-alt); padding:16px; }

/* ---------- Popovers & Modals (high z-index) ---------- */
.cm-popover {
  position: absolute;
  background: var(--bg-alt);
  color: var(--fg);
  border-radius: 10px;
  padding:10px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.45);
  border:1px solid var(--border);
  display:none;
  z-index: 4000; /* deutlich hoch; modals sind noch höher */
}
.cm-popover[aria-hidden="false"] { display:block; }

/* popover close button (small) */
.cm-popover-close {
  position:absolute;
  right:8px;
  top:8px;
  background:transparent;
  border:none;
  color:var(--muted);
  font-size:16px;
  cursor:pointer;
}

/* Modals (global) */
.cm-modal {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 4500;
}
.cm-modal[aria-hidden="false"] { display:block; }
.cm-modal .cm-modal-backdrop {
  position:absolute; inset:0; background: rgba(0,0,0,0.45);
}
.cm-modal .cm-modal-panel {
  position: absolute;
  left:50%; top:50%; transform:translate(-50%,-50%);
  background: var(--bg-alt);
  color: var(--fg);
  border:1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  min-width: 320px;
  box-shadow: 0 24px 80px rgba(0,0,0,0.6);
}

/* modal close button style */
.cm-modal .cm-modal-close {
  position: absolute;
  right:10px; top:8px;
  background:transparent; border:none; color:var(--muted); font-size:18px; cursor:pointer;
}

/* ---------- Scrollbar small style ---------- */
.cm-sidebar::-webkit-scrollbar, .cm-toc::-webkit-scrollbar { width:6px; }
.cm-sidebar::-webkit-scrollbar-thumb, .cm-toc::-webkit-scrollbar-thumb { background:var(--accent); border-radius:3px; }

/* ---------- Responsive ---------- */
@media (max-width: 980px){
  .menu-list { display:none; }
  .menu-hamburger { display:block; }
  .cm-sidebar, .cm-toc { display:none; }
  body { padding-top: var(--header-h); }
}

/* small helper classes */
.muted { color: var(--muted); font-size:0.9rem; }
.account-block strong { display:block; }
